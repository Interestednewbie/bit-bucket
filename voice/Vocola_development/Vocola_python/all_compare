#!/bin/csh -f

setenv COMPUTERNAME mdl

set source=$1



rm -f target_old/* delta/*old* delta/*new*
rm -f $source/vcl2py_log.txt

echo "Perl:"
time \
    perl ~/voice/Vocola_development/main/src/vcl2py.pl -extensions extensions.csv $source target_old >& "delta/old"

touch $source/vcl2py_log.txt
cat $source/vcl2py_log.txt > "delta/log_old"
ruby -E Windows-1252 -i -p -e '$_.sub!(/Generated by vcl2py.*/, "GXXX")' target_old/* dummy




rm -f target_new/*
rm -f $source/vcl2py_log.txt

echo "Python:"
time \
  python full.py -debug 0  -extensions extensions.csv $source target_new >& "delta/new"

touch $source/vcl2py_log.txt
cat $source/vcl2py_log.txt > "delta/log_new"
ruby -E Windows-1252 -i -p -e '$_.sub!(/Generated by vcl2py.*/, "GXXX")' target_new/* dummy



diff -r target_old target_new
diff "delta/old" "delta/new"
diff "delta/log_old" "delta/log_new"
